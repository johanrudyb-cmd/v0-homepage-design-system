[
    {
        "name": "üìß OUTFITY - Emails Onboarding (API Resend)",
        "nodes": [
            {
                "parameters": {
                    "httpMethod": "POST",
                    "path": "outfity-onboarding",
                    "responseMode": "responseNode",
                    "options": {}
                },
                "id": "webhook-signup",
                "name": "Webhook Signup",
                "type": "n8n-nodes-base.webhook",
                "typeVersion": 2,
                "position": [
                    240,
                    300
                ],
                "webhookId": "outfity-onboarding"
            },
            {
                "parameters": {
                    "jsCode": "const { userId, email, name, plan } = $input.first().json;\n\nif (!email || !userId) {\n  throw new Error('email et userId requis');\n}\n\nreturn [{\n  json: {\n    userId,\n    email,\n    name: name || 'Cr√©ateur',\n    plan: plan || 'free',\n    signupDate: new Date().toISOString()\n  }\n}];"
                },
                "id": "validate-data",
                "name": "Valider Donn√©es",
                "type": "n8n-nodes-base.code",
                "typeVersion": 2,
                "position": [
                    460,
                    300
                ]
            },
            {
                "parameters": {
                    "respondWith": "json",
                    "responseBody": "={ \"success\": true, \"message\": \"Onboarding sequence started\" }",
                    "options": {
                        "responseCode": 200
                    }
                },
                "id": "respond-ok",
                "name": "R√©ponse OK",
                "type": "n8n-nodes-base.respondToWebhook",
                "typeVersion": 1,
                "position": [
                    680,
                    180
                ]
            },
            {
                "parameters": {
                    "method": "POST",
                    "url": "https://api.resend.com/emails",
                    "authentication": "genericCredentialType",
                    "genericAuthType": "httpHeaderAuth",
                    "sendHeaders": true,
                    "headerParameters": {
                        "parameters": [
                            {
                                "name": "Authorization",
                                "value": "=Bearer {{ $env.SMTP_PASS }}"
                            }
                        ]
                    },
                    "sendBody": true,
                    "bodyParameters": {
                        "parameters": [
                            {
                                "name": "from",
                                "value": "OUTFITY <onboarding@outfity.fr>"
                            },
                            {
                                "name": "to",
                                "value": "={{ $json.email }}"
                            },
                            {
                                "name": "subject",
                                "value": "=üéâ Bienvenue sur OUTFITY, {{ $json.name }} !"
                            },
                            {
                                "name": "html",
                                "value": "=<div style=\"font-family: -apple-system, Inter, sans-serif; max-width: 600px; margin: 0 auto; background: #F5F5F7; padding: 40px 20px;\">\n  <div style=\"background: white; border-radius: 24px; padding: 40px; text-align: center;\">\n    <h1 style=\"color: #1D1D1F; font-size: 28px; font-weight: 600; letter-spacing: -0.02em;\">Bienvenue sur OUTFITY üé®</h1>\n    <p style=\"color: #1D1D1F; font-size: 16px; line-height: 1.6;\">Bonjour {{ $json.name }},</p>\n    <p style=\"color: #1D1D1F; font-size: 16px; line-height: 1.6;\">Vous √™tes maintenant pr√™t(e) √† cr√©er votre marque de v√™tements avec l'IA. Voici ce que vous pouvez faire d√®s maintenant :</p>\n    <div style=\"margin: 30px 0;\">\n      <div style=\"background: #F5F5F7; border-radius: 16px; padding: 20px; margin: 10px 0; text-align: left;\">\n        <strong>1Ô∏è‚É£ Cr√©er votre marque</strong><br>D√©finissez votre identit√© (nom, logo, couleurs)\n      </div>\n      <div style=\"background: #F5F5F7; border-radius: 16px; padding: 20px; margin: 10px 0; text-align: left;\">\n        <strong>2Ô∏è‚É£ Explorer les tendances</strong><br>15 000+ produits analys√©s quotidiennement\n      </div>\n      <div style=\"background: #F5F5F7; border-radius: 16px; padding: 20px; margin: 10px 0; text-align: left;\">\n        <strong>3Ô∏è‚É£ G√©n√©rer un design</strong><br>Tech pack professionnel en quelques clics\n      </div>\n    </div>\n    <a href=\"{{ $env.OUTFITY_APP_URL }}/dashboard\" style=\"display: inline-block; background: #000; color: #fff; padding: 16px 32px; border-radius: 100px; text-decoration: none; font-weight: 500; font-size: 16px;\">Commencer maintenant ‚Üí</a>\n    <p style=\"color: #86868B; font-size: 13px; margin-top: 30px;\">OUTFITY par BIANGORY ‚Äî Cr√©ez votre marque avec les donn√©es des g√©ants</p>\n  </div>\n</div>"
                            }
                        ]
                    },
                    "options": {}
                },
                "id": "resend-j0",
                "name": "Resend - Bienvenue",
                "type": "n8n-nodes-base.httpRequest",
                "typeVersion": 4.1,
                "position": [
                    680,
                    380
                ]
            },
            {
                "parameters": {
                    "amount": 1,
                    "unit": "days"
                },
                "id": "wait-j1",
                "name": "Attendre J1",
                "type": "n8n-nodes-base.wait",
                "typeVersion": 1,
                "position": [
                    900,
                    380
                ]
            },
            {
                "parameters": {
                    "method": "POST",
                    "url": "https://api.resend.com/emails",
                    "authentication": "genericCredentialType",
                    "genericAuthType": "httpHeaderAuth",
                    "sendHeaders": true,
                    "headerParameters": {
                        "parameters": [
                            {
                                "name": "Authorization",
                                "value": "=Bearer {{ $env.SMTP_PASS }}"
                            }
                        ]
                    },
                    "sendBody": true,
                    "bodyParameters": {
                        "parameters": [
                            {
                                "name": "from",
                                "value": "OUTFITY <onboarding@outfity.fr>"
                            },
                            {
                                "name": "to",
                                "value": "={{ $json.email }}"
                            },
                            {
                                "name": "subject",
                                "value": "üí° 3 erreurs √† √©viter quand on lance sa marque"
                            },
                            {
                                "name": "html",
                                "value": "=<div style=\"font-family: -apple-system, Inter, sans-serif; max-width: 600px; margin: 0 auto; background: #F5F5F7; padding: 40px 20px;\">\n  <div style=\"background: white; border-radius: 24px; padding: 40px;\">\n    <h1 style=\"color: #1D1D1F; font-size: 24px; font-weight: 600; letter-spacing: -0.02em;\">3 erreurs fatales des cr√©ateurs de mode üö´</h1>\n    <p style=\"color: #1D1D1F; font-size: 16px; line-height: 1.6;\">Bonjour {{ $json.name }},</p>\n    <div style=\"margin: 24px 0;\">\n      <div style=\"border-left: 3px solid #FF3B30; padding-left: 16px; margin: 20px 0;\">\n        <strong>Erreur #1 : Ignorer les tendances</strong><br>\n        <span style=\"color: #86868B;\">Les marques qui r√©ussissent analysent les donn√©es. Notre module Tendances scrape 15 000+ produits/jour.</span>\n      </div>\n      <div style=\"border-left: 3px solid #FF9500; padding-left: 16px; margin: 20px 0;\">\n        <strong>Erreur #2 : N√©gliger le Tech Pack</strong><br>\n        <span style=\"color: #86868B;\">Un tech pack professionnel √©vite 80% des erreurs de production. G√©n√©rez le v√¥tre en 2 minutes avec l'IA.</span>\n      </div>\n      <div style=\"border-left: 3px solid #007AFF; padding-left: 16px; margin: 20px 0;\">\n        <strong>Erreur #3 : Commencer sans strat√©gie</strong><br>\n        <span style=\"color: #86868B;\">Notre Launch Map vous guide √©tape par √©tape, de l'identit√© de marque au lancement.</span>\n      </div>\n    </div>\n    <a href=\"{{ $env.OUTFITY_APP_URL }}/launch-map\" style=\"display: inline-block; background: #000; color: #fff; padding: 14px 28px; border-radius: 100px; text-decoration: none; font-weight: 500;\">Voir ma Launch Map ‚Üí</a>\n    <p style=\"color: #86868B; font-size: 13px; margin-top: 30px;\">OUTFITY par BIANGORY</p>\n  </div>\n</div>"
                            }
                        ]
                    },
                    "options": {}
                },
                "id": "resend-j1",
                "name": "Resend - Tips",
                "type": "n8n-nodes-base.httpRequest",
                "typeVersion": 4.1,
                "position": [
                    1120,
                    380
                ]
            }
        ],
        "connections": {
            "Webhook Signup": {
                "main": [
                    [
                        {
                            "node": "Valider Donn√©es",
                            "type": "main",
                            "index": 0
                        }
                    ]
                ]
            },
            "Valider Donn√©es": {
                "main": [
                    [
                        {
                            "node": "R√©ponse OK",
                            "type": "main",
                            "index": 0
                        },
                        {
                            "node": "Resend - Bienvenue",
                            "type": "main",
                            "index": 0
                        }
                    ]
                ]
            },
            "Resend - Bienvenue": {
                "main": [
                    [
                        {
                            "node": "Attendre J1",
                            "type": "main",
                            "index": 0
                        }
                    ]
                ]
            },
            "Attendre J1": {
                "main": [
                    [
                        {
                            "node": "Resend - Tips",
                            "type": "main",
                            "index": 0
                        }
                    ]
                ]
            }
        },
        "settings": {
            "executionOrder": "v1"
        }
    }
]